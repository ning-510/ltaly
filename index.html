<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ciao, Italy! üáÆüáπ Áæ©Â§ßÂà©ËúúÊúàÊâãÂ∏≥</title>
    
    <!-- 1. ÂºïÂÖ• Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        terracotta: { 50: '#fff5f0', 100: '#ffe4d6', 200: '#ffcbb0', 300: '#ffa57e', 400: '#ff7647', 500: '#fa531e', 600: '#db3309', 700: '#b62208' },
                        olive: { 50: '#f4f7f0', 100: '#e5eddc', 200: '#cddbbf', 600: '#5d7a3e', 700: '#486030', 800: '#324422' },
                        racing: { red: '#ef4444', dark: '#111827' }
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Lato', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <!-- 2. ÂºïÂÖ•Â≠óÂûã -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <!-- 3. ÂºïÂÖ• React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        body { background-color: #fbf7f0; overflow: hidden; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
        .content-area { padding-bottom: 140px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        
        // ==========================================
        // üëáüëá Ë®≠ÂÆöÂçÄÂüü üëáüëá
        // ==========================================

        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbytsqFAEkQKSpDo5AWg2fF3rjmURYRLov1N0y-SL-PzULlsTHcshfT2cA35DlrvU_ZG2A/exec"; 
        const MY_TRIP_ID = "ITALY_TRIP";

        // ==========================================

        // --- ÂÖßÂª∫ÂúñÁ§∫Â∫´ (SVG) ---
        const Icons = {
            Sun: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>,
            Cloud: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17.5 19c0-1.7-1.3-3-3-3h-11C1.6 16 0 14.4 0 12.5 0 10.6 1.6 9 3.5 9c.1-.8.5-1.6 1.1-2.2C5.9 5.5 8 5.1 10 5.8c1.3-1.8 3.4-3 5.8-2.8 4 .3 7.1 3.8 7.1 7.9v.3C23.6 11.9 24 12.7 24 13.5c0 3-2.5 5.5-5.5 5.5h-1z"/></svg>,
            CloudRain: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>,
            MapPin: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Navigation: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>,
            Camera: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>,
            ShoppingBag: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>,
            ShoppingCart: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg>,
            Coffee: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" x2="6" y1="2" y2="4"/><line x1="10" x2="10" y1="2" y2="4"/><line x1="14" x2="14" y1="2" y2="4"/></svg>,
            AlertTriangle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></svg>,
            Train: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="16" height="16" x="4" y="3" rx="2"/><path d="M4 11h16"/><path d="M12 3v8"/><path d="m8 19-2 3"/><path d="m18 22-2-3"/><path d="M8 15h0"/><path d="M16 15h0"/></svg>,
            Plane: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12h20"/><path d="M13 12l5-8"/><path d="M13 12l5 8"/></svg>, 
            Wallet: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/><path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"/></svg>,
            Plus: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Trash2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            ExternalLink: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>,
            Share2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>,
            FileSpreadsheet: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/></svg>,
            Loader2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg>,
            Lock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
            Users: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            LogIn: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" x2="3" y1="12" y2="12"/></svg>,
            LinkIcon: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>, 
            MapIcon: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" x2="9" y1="3" y2="18"/><line x1="15" x2="15" y1="6" y2="21"/></svg>, 
            Settings: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.35a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Gift: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 12 20 22 4 22 4 12"/><rect width="20" height="5" x="2" y="7"/><line x1="12" x2="12" y1="22" y2="7"/><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"/><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"/></svg>,
            CheckCircle2: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg>,
            Compass: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></svg>,
            Trophy: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
            Utensils: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>,
            Square: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2"/></svg>,
            CloudUpload: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m16 16-4-4-4 4"/></svg>,
            // Hand-Drawn Style Hearts
            Heart: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" fill="currentColor" /></svg>,
            HeartCrack: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.28 3.6-2.33 3.6-5.25 0-3-5.5-3-5.5-3 0 0-1.1 .7-2.65 2.65L12 11l-2.45-2.6C8.1 6.7 7 6 7 6s-5.5 0-5.5 3c0 2.92 2.1 3.97 3.6 5.25C6.6 15.54 8.4 16.83 12 20c3.6-3.17 5.4-4.46 7-6Z"/><path d="m12 13-1-1 2-2-3-3"/></svg>
        };

        // --- Á®ãÂºèÈÇèËºØ ---
        const { useState, useEffect, useRef } = React;

        const tripData = [
            {
                day: 1, date: "12/05 (‰∫î)", location: "Âè∞Âåó -> ÊùúÊãú",
                weather: { temp: "18¬∞C - 22¬∞C", status: "Cloudy", icon: Icons.Cloud },
                highlights: ["ÈòøËÅØÈÖãËà™Á©∫", "Ë±™ËèØÂÆ¢Ê©üÈ´îÈ©ó"],
                itinerary: [
                    { 
                        type: "flight", 
                        time: "23:00 - 04:55 (+1)", 
                        flightNo: "EK367", 
                        route: "TPE ‚ûù DXB",
                        terminal: "T2",
                        gate: "Check Mon",
                        status: "On Time"
                    },
                    { time: "20:00", type: "transport", title: "Ê°ÉÂúíÊ©üÂ†¥ÈõÜÂêà", desc: "Á¨¨‰∫åËà™Âªà ÈòøËÅØÈÖãËà™Á©∫ÂúòÈ´îÊ´ÉÂè∞" },
                ],
                tips: [
                    { type: "note", text: "Èï∑ÈÄîÈ£õË°åÂª∫Ë≠∞Á©øËëóÂØ¨È¨ÜËàíÈÅ©Ë°£Áâ©ÔºåÊîúÂ∏∂È†∏Êûï„ÄÇ" },
                    { type: "scam", text: "Ê©üÂ†¥ÈõñÁÑ∂ÂÆâÂÖ®Ôºå‰ΩÜË≠∑ÁÖßÁôªÊ©üË≠âË´ãÈö®Ë∫´‰øùÁÆ°ÔºåÂãøÈö®ÊÑèÊì±ÁΩÆ„ÄÇ" }
                ]
            },
            {
                day: 2, date: "12/06 (ÂÖ≠)", location: "ÊùúÊãú -> Á±≥Ëò≠",
                weather: { temp: "4¬∞C - 10¬∞C", status: "Sunny", icon: Icons.Sun },
                highlights: ["Á±≥Ëò≠Â§ßÊïôÂ†Ç", "F1Êéí‰ΩçË≥Ω", "Á±≥Ëò≠ÁáâÈ£Ø"],
                itinerary: [
                    { 
                        type: "flight", 
                        time: "09:05 - 13:10", 
                        flightNo: "EK205", 
                        route: "DXB ‚ûù MXP",
                        terminal: "T3",
                        gate: "Check Mon",
                        status: "On Time"
                    },
                    { time: "13:10", type: "transport", title: "ÊäµÈÅîÁ±≥Ëò≠È¶¨ÁàæÂΩ≠Ëñ©Ê©üÂ†¥" },
                    { 
                        type: "f1", 
                        title: "F1 Abu Dhabi GP - Qualifying üèÅ",
                        timeStr: "18:00 (Abu Dhabi) | 15:00 (Italy)",
                        desc: "ÈòøÂ∏ÉÈÅîÊØîÁ´ôÊéí‰ΩçË≥ΩÔºÅMax Verstappen Âä†Ê≤πÔºÅüèÜ"
                    },
                    { time: "‰∏ãÂçà", type: "spot", title: "Á±≥Ëò≠Â§ßÊïôÂ†Ç (Duomo)", desc: "‰∏ñÁïåÁ¨¨‰∏âÂ§ßÊïôÂ†ÇÔºåÁôΩËâ≤Â§ßÁêÜÁü≥Âì•Âæ∑ÂºèÂª∫ÁØâÔºåÂ§ñËßÄÈõÑÂÅâÂÖ∏ÈõÖ„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Duomo+di+Milano" },
                    { time: "‰∏ãÂçà", type: "spot", title: "ËâæÊõºÁ¥ê‰∫å‰∏ñËø¥Âªä", desc: "Á±≥Ëò≠ÁöÑÂ§ßÂÆ¢Âª≥ÔºåÊôÇÂ∞öÂêçÁâåËÅöÈõÜÂú∞„ÄÇË∏©ÈáëÁâõÂ∫ßÂÖ¨ÁâõËõãËõãÊìöË™™ÊúÉÂ∏∂‰æÜÂ•ΩÈÅãÔºÅ", link: "https://www.google.com/maps/search/?api=1&query=Galleria+Vittorio+Emanuele+II" },
                    
                    { 
                        type: "recommendation", 
                        title: "üçΩÔ∏è Êé®Ëñ¶Âú®Âú∞ÁæéÈ£ü (Ëá™ÁêÜÈ§ê)", 
                        items: [
                            { name: "Luini", desc: "Á±≥Ëò≠ÂøÖÂêÉÁÇ∏Ëµ∑Âè∏È§°È§Ö (Panzerotti)Ôºå‰æøÂÆúÁæéÂë≥„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Luini+Milano" },
                            { name: "Spontini", desc: "Ë∂ÖÂéöÂàáÊä´Ëñ©ÔºåËµ∑Âè∏ÁâΩÁµ≤Ôºå‰ªΩÈáèÂçÅË∂≥„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Pizzeria+Spontini+Duomo" },
                            { name: "Cioccolatitaliani", desc: "Â§ßÊïôÂ†ÇÊóÅË∂ÖÂé≤ÂÆ≥ÁöÑÂ∑ßÂÖãÂäõÂÜ∞Ê∑áÊ∑ã„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Cioccolatitaliani+Milano+Duomo" }
                        ]
                    },

                    { time: "ÊôöÈ§ê", type: "food", title: "Á±≥Ëò≠ÁáâÈ£ØÈ¢®Âë≥ÊñôÁêÜ", desc: "ÈÅìÂú∞Áï™Á¥ÖËä±ÁáâÈ£Ø" },
                ],
                stay: "UNAHOTELS MALPENSA",
                mustBuy: ["Áæ©Â§ßÂà©ÂíñÂï°Á≤â (Lavazza/Illy)", "Á≤æÂìÅ (Gucci/Prada Áî¢Âú∞ÂÉπ)", "Kiko ÂΩ©Â¶ù"],
                tips: [
                    { type: "scam", text: "„ÄêÈò≤È®ô„ÄëÁ±≥Ëò≠Â§ßÊïôÂ†ÇÂª£Â†¥Â¶ÇÊúâÈªë‰∫∫Âº∑Ë°åÁµ¶‰Ω†Êà¥Âπ∏ÈÅãÁπ©(ÊâãÁí∞)ÔºåË´ãÈõôÊâãÊèíÂè£Ë¢ãÂø´ÈÄüÈõ¢ÈñãÔºåÊà¥‰∏äÂ∞±ÊúÉË¢´Ë¶ÅÈå¢„ÄÇ" },
                    { type: "scam", text: "„ÄêÈò≤È®ô„ÄëÊúâ‰∫∫‰∏ªÂãïÁµ¶È¥øÂ≠êÈ£ºÊñô‰πüË¶ÅÊãíÁµïÔºåÊãçÂÆåÁÖßÊúÉË¢´Á¥¢ÂèñÈ´òÈ°çË≤ªÁî®„ÄÇ" }
                ]
            },
            {
                day: 3, date: "12/07 (Êó•)", location: "Á±≥Ëò≠ -> È¶¨ÁÑ¶Èõ∑Êπñ -> Á∂≠Ê¥õÁ¥ç",
                weather: { temp: "2¬∞C - 8¬∞C", status: "Cloudy", icon: Icons.Cloud },
                highlights: ["F1Ê≠£Ë≥Ω", "Á∂≠Ê¥õÁ¥ç", "Ëå±È∫óËëâÊïÖÂ±Ö"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "spot", title: "È¶¨ÁÑ¶Èõ∑Êπñ (Lake Maggiore)", desc: "Áæ©Â§ßÂà©Á¨¨‰∫åÂ§ßÊπñÔºåÈòøÁàæÂçëÊñØÂ±±ËÖ≥‰∏ãÁöÑÁµïÁæéÊπñÂÖâÂ±±Ëâ≤„ÄÇÁâπÂà•ÂÆâÊéíÈÅäËàπÈ´îÈ©ó„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Lake+Maggiore" },
                    { time: "‰∏ãÂçà", type: "transport", title: "ÂâçÂæÄÁ∂≠Ê¥õÁ¥ç (Verona)", desc: "Á¥Ñ 164KM ËªäÁ®ã" },
                    { 
                        type: "f1", 
                        title: "F1 Abu Dhabi GP - Race Day üèéÔ∏èüí®",
                        timeStr: "17:00 (Abu Dhabi) | 14:00 (Italy)",
                        desc: "Âπ¥Â∫¶Êî∂ÂÆòÊà∞Ê≠£Ë≥ΩÔºÅË¶ãË≠â Max Â•™ÂÜ†ÊôÇÂàªÔºÅüèÜüá≥üá±"
                    },
                    { time: "‰∏ãÂçà", type: "spot", title: "Á∂≠Ê¥õÁ¥çÂúìÂΩ¢Á´∂ÊäÄÂ†¥", desc: "‰øùÂ≠òÂÆåÂ•ΩÁöÑÂè§ÁæÖÈ¶¨Á´∂ÊäÄÂ†¥ÔºåÁèæÁÇ∫Ê≠åÂäáË°®ÊºîÂ†¥Âú∞„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Verona+Arena" },
                    { time: "ÊôöÈ§ê", type: "food", title: "ÁôæÂπ¥ÊïôÂ†ÇÁæ©ÂºèÊä´Ëñ©", desc: "Âú®ÊîπÂª∫ÁöÑÊïôÂ†Ç‰∏≠‰∫´Áî®Êä´Ëñ©" }
                ],
                stay: "BEST WESTERN CTC HOTEL VERONA",
                mustBuy: ["Ê™∏Ê™¨ÈÖí (Limoncello)", "Áæ©Â§ßÂà©È∫µÊ¢ùÈÄ†ÂûãÁ£ÅÈêµ"],
                tips: [
                    { type: "info", text: "Á∂≠Ê¥õÁ¥çÊòØÁæÖÂØÜÊ≠êËàáËå±È∫óËëâÁöÑÊïÖÈÑâÔºåÂÖÖÊªøÊÑõÊÉÖÁöÑÊ∞õÂúç„ÄÇ" }
                ]
            },
            {
                day: 4, date: "12/08 (‰∏Ä)", location: "Á∂≠Ê¥õÁ¥ç -> Â®ÅÂ∞ºÊñØ -> Â∏ïÂ§öÁì¶",
                weather: { temp: "3¬∞C - 9¬∞C", status: "Rain", icon: Icons.CloudRain },
                highlights: ["Ë≤¢Â§öÊãâÈÅäËàπ", "ËÅñÈ¶¨ÂèØÂª£Â†¥", "Â¢®È≠öÈ∫µ"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "transport", title: "ÂâçÂæÄÂ®ÅÂ∞ºÊñØ", desc: "Á¥Ñ 46KM ËªäÁ®ã" },
                    { time: "ÂÖ®Êó•", type: "spot", title: "Â®ÅÂ∞ºÊñØÊú¨Â≥∂Êï£Á≠ñ", desc: "ËÅñÈ¶¨ÂèØÂª£Â†¥„ÄÅÁ∏ΩÁù£ÂÆÆ„ÄÅÂòÜÊÅØÊ©ã„ÄÇÁâπÂà•ÂÆâÊéíÁï∂Âú∞Â∞éÈÅäÂ∞éË¶ΩÂ∑∑ÂºÑ„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=St+Mark+Square" },
                    { time: "È´îÈ©ó", type: "spot", title: "Ë≤¢Â§öÊãâÈ≥≥Â∞æËàπ (Gondola)", desc: "‰∫î‰∫∫‰∏ÄËâòÔºåÁ©øÊ¢≠Ê∞¥Â∑∑ÊÑüÂèóÊµ™Êº´Ê∞õÂúç„ÄÇ" },
                    { time: "ÂçàÈ§ê", type: "food", title: "Â®ÅÂ∞ºÊñØÂ¢®È≠öÈ∫µ‰ΩêÁÇ∏Êµ∑ÈÆÆ", desc: "Á∂ìÂÖ∏ÂøÖÂêÉÔºåÂêÉÂÆåÂò¥Â∑¥ÊúÉÈªëÈªëÁöÑÂñîÔºÅ" },
                    { time: "‰∏ãÂçà", type: "free", title: "ÂñÆÈ£õÊôÇÂÖâ", desc: "Ëá™Áî±Êé¢Á¥¢Â®ÅÂ∞ºÊñØÂ∞èÂ∫óÊàñ‰∫´Áî®‰∏ãÂçàËå∂" },
                    
                    { 
                        type: "recommendation", 
                        title: "üçΩÔ∏è Êé®Ëñ¶Âú®Âú∞ÁæéÈ£ü (Ëá™ÁêÜÈ§ê)", 
                        items: [
                            { name: "Dal Moro's", desc: "‰∫∫Ê∞£Á¨¨‰∏Ä Fresh Pasta to goÔºåÂ¢®È≠öÈ∫µÊòØÊãõÁâå„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Dal+Moro's+Fresh+Pasta+to+Go" },
                            { name: "Suso Gelato", desc: "Â®ÅÂ∞ºÊñØÁ∂≤Á¥ÖÂÜ∞Ê∑áÊ∑ãÔºåÂè£Âë≥ÁâπÊÆä‰∏îË£ùÈ£æËèØÈ∫óÔºåÂøÖÊâìÂç°ÔºÅ", link: "https://www.google.com/maps/search/?api=1&query=Suso+Gelatoteca" },
                            { name: "Antico Forno", desc: "Ë©ïÂÉπÊ•µÈ´òÁöÑÂàáÁâáÊä´Ëñ©ÔºåÈ§ÖÁöÆÈÖ•ËÑÜ„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Antico+Forno+Venezia" }
                        ]
                    },

                    { time: "Êôö‰∏ä", type: "transport", title: "ÂâçÂæÄÂ∏ïÂ§öÁì¶", desc: "Á¥Ñ 46KM ËªäÁ®ã" }
                ],
                stay: "CROWNE PLAZA PADOVA",
                mustBuy: ["Â®ÅÂ∞ºÊñØÈù¢ÂÖ∑ (Ë£ùÈ£æÁî®)", "ÁéªÁíÉË£ΩÂìÅ (Murano Glass)", "ËïæÁµ≤Ë£ΩÂìÅ (Burano)"],
                tips: [
                    { type: "scam", text: "„ÄêÈò≤È®ô„ÄëÂ®ÅÂ∞ºÊñØÁî®È§êË´ãÂÖàÁ¢∫Ë™çËèúÂñÆÂÉπÊ†ºÔºåÈÉ®ÂàÜÈ§êÂª≥ÊúÉÊúâÈö±ËóèÁöÑÊ°åÂ∏ÉË≤ªÊàñÈ´òÈ°çÊúçÂãôË≤ª„ÄÇ" },
                    { type: "info", text: "Â®ÅÂ∞ºÊñØË∑ØÈù¢Â§öÊ©ãÊ®ëÈöéÊ¢ØÔºåÂª∫Ë≠∞Ëºï‰æøË£ùÂÇôÔºåÂ§ßÂûãË°åÊùéÈÄöÂ∏∏ÊúÉÂØÑÊîæÂú®ÈÅäË¶ΩËªä‰∏ä„ÄÇ" }
                ]
            },
            {
                day: 5, date: "12/09 (‰∫å)", location: "Â∏ïÂ§öÁì¶ -> ‰ΩõÁæÖÂÄ´ÊñØ -> ËíôÂú∞Âç°ËíÇÂ∞º",
                weather: { temp: "5¬∞C - 12¬∞C", status: "Sunny", icon: Icons.Sun },
                highlights: ["ËÅñÊØçÁôæËä±Â§ßÊïôÂ†Ç", "È†ò‰∏ªÂª£Â†¥", "‰ΩõÁæÖÂÄ´ÊñØÁâõÊéí"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "transport", title: "ÂâçÂæÄ‰ΩõÁæÖÂÄ´ÊñØ", desc: "Á¥Ñ 236KM ËªäÁ®ãÔºåÊñáËóùÂæ©ËààÁôºÊ∫êÂú∞„ÄÇ" },
                    { time: "‰∏ãÂçà", type: "spot", title: "ËÅñÊØçÁôæËä±Â§ßÊïôÂ†Ç", desc: "Â∑®Â§ßÁöÑÁ¥ÖËâ≤ÂúìÈ†ÇÊòØÂú∞Ê®ô„ÄÇÂ§©Â†Ç‰πãÈñÄ„ÄÅÂñ¨ÊâòÈêòÊ®ìÁöÜÂú®ÊóÅ„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Cathedral+of+Santa+Maria+del+Fiore" },
                    { time: "‰∏ãÂçà", type: "spot", title: "È†ò‰∏ªÂª£Â†¥", desc: "Èú≤Â§©ÁöÑÁæéË°ìÈ§®ÔºåÊµ∑Á•ûÂô¥Ê≥âËàáÂ§ßË°õÂÉèË§áË£ΩÂìÅ„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Piazza+della+Signoria" },
                    { time: "ÂçàÈ§ê", type: "food", title: "‰ΩõÁæÖÂÄ´ÊñØ‰∏ÅÈ™®ÁâõÊéí", desc: "ÊâòÊñØÂç°Â∞ºÂøÖÂêÉÁæéÈ£üÔºåÂ§ñÁÑ¶È¶ôÂÖßÈÆÆÂ´©„ÄÇ" },
                    { time: "Êôö‰∏ä", type: "transport", title: "ÂâçÂæÄËíôÂú∞Âç°ËíÇÂ∞º", desc: "Ê∫´Ê≥âÂ∞èÈéÆ" }
                ],
                stay: "GRAND HOTEL CROCE DI MALTA",
                mustBuy: ["ËïæËéâÊ≠ê (L'Erbolario) ‰øùÈ§äÂìÅ", "ÁöÆ‰ª∂ (The Bridge/Â∞èÂ∫ó)", "ÊùæÈú≤ÈÜ¨"],
                tips: [
                    { type: "scam", text: "„ÄêÈò≤È®ô„Äë‰ΩõÁæÖÂÄ´ÊñØÊôØÈªû‰∫∫ÊΩÆÁúæÂ§öÔºåÂ∞èÂøÉÊâíÊâãË≤ºË∫´„ÄÇÂêâÊôÆË≥ΩÂ©¶Â•≥ÊàñÂ∞èÂ≠©Èù†ËøëË¶ÅÁâπÂà•Ë≠¶Ë¶∫„ÄÇ" },
                    { type: "buy", text: "ËÅñÊØçÁôæËä±Â§ßÊïôÂ†ÇÊóÅÁöÑËïæËéâÊ≠êÂ∞àË≥£Â∫óÈÄöÂ∏∏Êúâ‰∏≠ÊñáÂ∫óÂì°Ôºå‰∏îÈÄÅË©¶Áî®ÂåÖÂæàÂ§ßÊñπÔºÅ" }
                ]
            },
            {
                day: 6, date: "12/10 (‰∏â)", location: "‰ΩõÁæÖÂÄ´ÊñØ -> ‰∫îÊºÅÊùë -> ÊØîËñ©",
                weather: { temp: "6¬∞C - 11¬∞C", status: "Cloudy", icon: Icons.Cloud },
                highlights: ["‰∫îÊºÅÊùëÁÅ´ËªäÈÅä", "ÊØîËñ©ÊñúÂ°î"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "transport", title: "ÂâçÂæÄ‰∫îÊºÅÊùë (Cinque Terre)", desc: "Êê≠‰πòÁÅ´ËªäÈÅäË¶ΩÊá∏Â¥ñ‰∏äÁöÑÁπΩÁ¥õÂ∞èÈéÆ„ÄÇ" },
                    { time: "Ê¥ªÂãï", type: "spot", title: "‰∫îÊºÅÊùëÂ∑°Á¶Æ", desc: "ÊãúË®™ÂÖ∂‰∏≠ÂÖ©ÂÄãÊºÅÊùëÔºåÊ¨£Ë≥ûÂú∞‰∏≠Êµ∑ÁæéÊôØËàáÂΩ©Ëâ≤ÊàøËàç„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Cinque+Terre" },
                    
                    { 
                        type: "recommendation", 
                        title: "üçΩÔ∏è Êé®Ëñ¶Âú®Âú∞ÁæéÈ£ü (Ëá™ÁêÜÈ§ê)", 
                        items: [
                            { name: "Il Bocconcino", desc: "Monterosso ËªäÁ´ôÊóÅÔºåÂøÖÂêÉÁÇ∏Êµ∑ÈÆÆÊùØ (Fritto Misto)ÔºÅ", link: "https://www.google.com/maps/search/?api=1&query=Il+Bocconcino+Monterosso" },
                            { name: "Focaccia", desc: "Âà©Âè§Èáå‰∫ûÂ§ßÂçÄÁâπÁî¢‰ΩõÂç°Â§èÈ∫µÂåÖÔºåÈö®‰æø‰∏ÄÂÆ∂ÈÉΩÂ•ΩÂêÉ„ÄÇ", link: "" },
                            { name: "Gelateria Vernazza", desc: "Â¶ÇÊûúÂú®VernazzaÔºåÈÄôÂÆ∂ÂÜ∞Ê∑áÊ∑ãÂæàÊ£í„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Gelateria+Vernazza" }
                        ]
                    },

                    { time: "‰∏ãÂçà", type: "transport", title: "ÂâçÂæÄÊØîËñ© (Pisa)", desc: "Á¥Ñ 87KM ËªäÁ®ã" },
                    { time: "‰∏ãÂçà", type: "spot", title: "ÊØîËñ©ÊñúÂ°î & Â•áËπüÂª£Â†¥", desc: "‰∏ñÁïåÈÅ∫Áî¢ÔºåÂøÖÊãçÊé®Â°îÁÖß„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Leaning+Tower+of+Pisa" },
                ],
                stay: "AC HOTEL PISA",
                mustBuy: ["ÊØîËñ©ÊñúÂ°îÈÄ†ÂûãÁ¥ÄÂøµÂìÅ", "Áæ©Â§ßÂà©È¶ôÊñô"],
                tips: [
                    { type: "info", text: "‰∫îÊºÅÊùëË∑ØÈù¢Ëµ∑‰ºèÂ§ßÔºåË´ãÁ©øËëóÂ•ΩËµ∞ÁöÑÈûãÂ≠ê„ÄÇ" },
                    { type: "scam", text: "„ÄêÈò≤È®ô„ÄëÊØîËñ©ÊñúÂ°îÂë®ÈÇäÊúâÂæàÂ§öÊµÅÂãïÊî§Ë≤©ÔºåÂÉπÊ†ºËêΩÂ∑ÆÂ§ßÔºåË®òÂæóÊÆ∫ÂÉπÊàñÁõ¥Êé•ÂéªÊ≠£Ë¶èÂ∫óÈù¢Ë≥ºË≤∑„ÄÇ" }
                ]
            },
            {
                day: 7, date: "12/11 (Âõõ)", location: "ÊØîËñ© -> ÊâòÊñØÂç°Â∞º -> ÁæÖÈ¶¨",
                weather: { temp: "4¬∞C - 10¬∞C", status: "Sunny", icon: Icons.Sun },
                highlights: ["ÊâòÊñØÂç°Â∞ºÈÖíËéä", "ÁöÆÊÅ©Ëñ©Â±±Âüé", "ÂìÅÈÖí"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "transport", title: "ÂâçÂæÄÊâòÊñØÂç°Â∞ºÂú∞ÂçÄ", desc: "‰∫´ÂèóÁî∞ÂúíÈ¢®ÂÖâ" },
                    { time: "È´îÈ©ó", type: "spot", title: "ÈÖíËéäÂìÅÈÖíÈ´îÈ©ó", desc: "ÂèÉËßÄÈÖíËéä‰∏¶ÂìÅÂöêÈÅìÂú∞Ëë°ËêÑÈÖí (Chianti/Montepulciano)„ÄÇ" },
                    { time: "‰∏ãÂçà", type: "spot", title: "ÁöÆÊÅ©Ëñ© (Pienza)", desc: "ÊïôÂÆóÁöÑÁêÜÊÉ≥ÂüéÔºåÂ•ßÁàæÊÅ∞Â±±Ë∞∑ÁöÑÁèçÁè†Ôºå‰∏ñÁïåÈÅ∫Áî¢Â±±Âüé„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Pienza" },
                    { time: "Êôö‰∏ä", type: "transport", title: "ÂâçÂæÄÁæÖÈ¶¨", desc: "Á¥Ñ 188KM ËªäÁ®ãÔºåÊ∞∏ÊÅÜ‰πãÂüé„ÄÇ" }
                ],
                stay: "WARMTHOTEL ROME",
                mustBuy: ["ÊâòÊñØÂç°Â∞ºÁ¥ÖÈÖí (Chianti)", "ÁæäÂ•∂Ëµ∑Âè∏ (Pecorino)", "Ê©ÑÊ¨ñÊ≤π"],
                tips: [
                    { type: "buy", text: "ÁöÆÊÅ©Ëñ©‰ª•ÁæäÂ•∂Ëµ∑Âè∏ËÅûÂêçÔºåÂñúÊ≠°Ëµ∑Âè∏ÁöÑ‰∫∫ÂçÉËê¨Âà•ÈåØÈÅéË©¶ÂêÉ„ÄÇ" }
                ]
            },
            {
                day: 8, date: "12/12 (‰∫î)", location: "ÁæÖÈ¶¨ÂÖ®Êó•ËßÄÂÖâ",
                weather: { temp: "5¬∞C - 12¬∞C", status: "Sunny", icon: Icons.Sun },
                highlights: ["Ê¢µËíÇÂ≤°", "È¨•Áç∏Â†¥", "Ë®±È°òÊ±†", "ÈáëÊùØÂíñÂï°"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "spot", title: "ËÅñÂΩºÂæóÂ§ßÊïôÂ†Ç (Ê¢µËíÇÂ≤°)", desc: "‰∏ñÁïåÊúÄÂ§ßÊïôÂ†ÇÔºåÁ±≥ÈñãÊúóÂü∫ÁæÖ„ÄäËÅñÊÆ§„ÄãÊâÄÂú®Âú∞„ÄÇÈúÄÂÆâÊ™¢ÊéíÈöä„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=St.+Peter's+Basilica" },
                    { time: "ÊôØÈªû", type: "spot", title: "ÁæÖÈ¶¨Á´∂ÊäÄÂ†¥ (Colosseum)", desc: "Âè§ÁæÖÈ¶¨È¨•Áç∏Â†¥ÔºåÂú®Â§ñÈÉ®ÂèÉËßÄÊãçÁÖß„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Colosseum" },
                    { time: "‰∏ãÂçà", type: "spot", title: "ÁâπÈõ∑Á∂≠Âô¥Ê≥â (Ë®±È°òÊ±†)", desc: "ËÉåÂ∞çÊ±†‰∏üÁ°¨Âπ£Ë®±È°òÈáçËøîÁæÖÈ¶¨„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Trevi+Fountain" },
                    { time: "‰∏ãÂçà", type: "spot", title: "Ë•øÁè≠ÁâôÂª£Â†¥", desc: "ÁæÖÈ¶¨ÂÅáÊúüÁöÑÂ†¥ÊôØÔºåÁ†¥ËàπÂô¥Ê≥â„ÄÇ" },
                    { time: "È´îÈ©ó", type: "food", title: "ÈáëÊùØÂíñÂï° (Tazza d'Oro)", desc: "ÁâπÂà•ÂÆâÊéíÊØè‰∫∫‰∏ÄÊùØÔºåÂ∞±Âú®Ëê¨Á•ûÊÆøÊóÅ„ÄÇ" },
                    { time: "ÊôöÈ§ê", type: "food", title: "ÁæÖÈ¶¨Â∞èÁæîÁæäÈ¢®Âë≥È§ê", desc: "ÁæÖÈ¶¨ÁâπËâ≤ÊñôÁêÜ" }
                ],
                stay: "WARMTHOTEL ROME",
                mustBuy: ["ÈáëÊùØÂíñÂï°Ë±Ü/Â∑ßÂÖãÂäõÁêÉ", "Bialetti Êë©Âç°Â£∫", "ÁæÖÈ¶¨Á´∂ÊäÄÂ†¥Á£ÅÈêµ"],
                tips: [
                    { type: "scam", text: "„ÄêÈò≤È®ô„ÄëÁæÖÈ¶¨Ê≤ªÂÆâÈúÄÊúÄÁÇ∫Ë¨πÊÖé„ÄÇÂú∞Èêµ„ÄÅÂÖ¨Ëªä‰∏äÊâíÊâãÊ•µÂ§ö„ÄÇË®±È°òÊ±†‰∫∫Êì†‰∫∫ÊôÇËÉåÂåÖË´ãËÉåÂâçÈù¢„ÄÇ" },
                    { type: "scam", text: "„ÄêÈò≤È®ô„ÄëË•øÁè≠ÁâôÂª£Â†¥ÈôÑËøë‰∏çË¶ÅÊé•ÈôåÁîü‰∫∫ÈÅûÁµ¶‰Ω†ÁöÑÁé´Áë∞Ëä±„ÄÇ" }
                ]
            },
            {
                day: 9, date: "12/13 (ÂÖ≠)", location: "ÁæÖÈ¶¨ -> Outlet -> Ê©üÂ†¥",
                weather: { temp: "5¬∞C - 11¬∞C", status: "Cloudy", icon: Icons.Cloud },
                highlights: ["Designer Outlet", "ÊªøËºâËÄåÊ≠∏"],
                itinerary: [
                    { time: "‰∏äÂçà", type: "spot", title: "Castel Romano Designer Outlet", desc: "ÁæÖÈ¶¨ËøëÈÉäÂ§ßÂûãOutletÔºåGucci, Burberry, Ferragamo Á≠âÂìÅÁâå„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Castel+Romano+Designer+Outlet" },
                    
                    { 
                        type: "recommendation", 
                        title: "üçΩÔ∏è Êé®Ëñ¶Âú®Âú∞ÁæéÈ£ü (Ëá™ÁêÜÈ§ê)", 
                        items: [
                            { name: "Farinella", desc: "Outlet ÂÖßÁöÑÊãøÂù°ÈáåÈ§êÂª≥ÔºåÊä´Ëñ©ÂíåÁæ©Â§ßÂà©È∫µÈÉΩ‰∏çÈåØ„ÄÇ", link: "https://www.google.com/maps/search/?api=1&query=Farinella+Castel+Romano" },
                            { name: "Spizzico", desc: "Âø´ÈÄüËß£Ê±∫‰∏ÄÈ§êÁöÑÂ•ΩÈÅ∏ÊìáÔºåÈ°û‰ººÈÄüÈ£üÁâàÁæ©ÂºèÊñôÁêÜ„ÄÇ", link: "" }
                        ]
                    },

                    { time: "‰∏ãÂçà", type: "transport", title: "ÂâçÂæÄÁæÖÈ¶¨ÈÅîÊñáË•øÊ©üÂ†¥", desc: "Ëæ¶ÁêÜÈÄÄÁ®ÖËàáÁôªÊ©üÊâãÁ∫å" },
                    { 
                        type: "flight", 
                        time: "14:55 - 23:30", 
                        flightNo: "EK098", 
                        route: "FCO ‚ûù DXB",
                        terminal: "T3",
                        gate: "Check Mon",
                        status: "On Time"
                    },
                ],
                tips: [
                    { type: "info", text: "ÈÄÄÁ®ÖË´ãÈ†êÁïôÂÖÖË∂≥ÊôÇÈñìÔºåÁæ©Â§ßÂà©ÈÄÄÁ®ÖÊéíÈöäÂèØËÉΩÂæàÈï∑„ÄÇÂñÆÂºµÁôºÁ•®Êªø155Ê≠êÂÖÉÂç≥ÂèØÈÄÄÁ®Ö„ÄÇ" },
                    { type: "info", text: "ÊâãÊèêË°åÊùéÊ≥®ÊÑèÊ∂≤È´îÈôêÂà∂ÔºåÊ©ÑÊ¨ñÊ≤π„ÄÅÈÖíÈ°ûÂøÖÈ†àÊâòÈÅã„ÄÇ" }
                ]
            },
            {
                day: 10, date: "12/14 (Êó•)", location: "ÊùúÊãú ->Âè∞Âåó",
                weather: { temp: "24¬∞C", status: "Sunny", icon: Icons.Sun },
                highlights: ["ÁîúËúúËøîÂÆ∂"],
                itinerary: [
                    { 
                        type: "flight", 
                        time: "03:40 - 15:35", 
                        flightNo: "EK366", 
                        route: "DXB ‚ûù TPE",
                        terminal: "T3",
                        gate: "Check Mon",
                        status: "On Time"
                    },
                    { time: "15:35", type: "transport", title: "ÊäµÈÅîÊ°ÉÂúíÊ©üÂ†¥", desc: "ÊóÖÁ®ãÂúìÊªøÁµêÊùü" }
                ],
                tips: []
            }
        ];

        // --- Ë≥ºÁâ©Ê∏ÖÂñÆË≥áÊñô ---
        const shoppingData = [
            {
                region: "Áæ©Â§ßÂà© - ‰ΩõÁæÖÂÄ´ÊñØ",
                items: [
                    { name: "L'Erbolario ËïæËéâÊ≠ê", desc: "ÂøÖË≤∑ÔºÅÁæ©Â§ßÂà©ËçâÊú¨‰øùÈ§äÂìÅÁâåÔºåÂÉπÂ∑ÆËàáÂè∞ÁÅ£Ê•µÂ§ß„ÄÇÁÜ±ÈñÄÔºö3ÈªûÈú≤„ÄÅÊµ∑ËóªÁ≤æËèØ„ÄÇ", tag: "ÂÉπÂ∑ÆÂ§ß" },
                    { name: "ÁúüÁöÆÁöÆ‰ª∂", desc: "‰ΩõÁæÖÂÄ´ÊñØÊòØÁöÆ‰ª∂‰πãÈÉΩÔºåThe Bridge Êàñ Il Bisonte ÈÉΩÊòØÂ•ΩÈÅ∏Êìá„ÄÇ", tag: "Ë≥™ÊÑü" },
                    { name: "Marvis ÁâôËÜè", desc: "ÁâôËÜèÁïåÁöÑÊÑõÈ¶¨‰ªïÔºåË∂ÖÂ∏ÇÂ∞±ÊúâË≥£ÔºåÈÄÅÁ¶ÆËá™Áî®ÂÖ©Áõ∏ÂÆú„ÄÇ", tag: "Ë∂ÖÂ∏Ç" }
                ]
            },
            {
                region: "Áæ©Â§ßÂà© - ÁæÖÈ¶¨ & ÂçóÈÉ®",
                items: [
                    { name: "ÈáëÊùØÂíñÂï° (Tazza d'Oro)", desc: "ÁæÖÈ¶¨Ëê¨Á•ûÊÆøÊóÅÔºåÂøÖË≤∑„ÄåÂíñÂï°Ë±ÜÂ∑ßÂÖãÂäõ„ÄçËàáÂíñÂï°Á≤â„ÄÇ", tag: "ÂøÖÂêÉ" },
                    { name: "Pocket Coffee", desc: "Ë≤ªÂàóÁæÖÊé®Âá∫ÁöÑÊøÉÁ∏ÆÂíñÂï°Â∑ßÂÖãÂäõÔºåÂí¨‰∏ãÂéªÊúâÊ∂≤È´îÂíñÂï°ÔºåÂÜ¨Â≠£ÈôêÂÆöÔºÅ", tag: "ÈôêÂÆö" },
                    { name: "Ê™∏Ê™¨ÈÖí (Limoncello)", desc: "Áæ©Â§ßÂà©ÂçóÈÉ®ÁâπÁî¢ÔºåÈ§êÂæåÁîúÈÖíÔºåÈÄ†ÂûãÁì∂Â≠êÂæàÈÅ©ÂêàÁï∂Á¥ÄÂøµÂìÅ„ÄÇ", tag: "ÈÖíÈ°û" }
                ]
            },
            {
                region: "Áæ©Â§ßÂà© - Â±ÖÂÆ∂ & ÂΩ©Â¶ù",
                items: [
                    { name: "Bialetti Êë©Âç°Â£∫", desc: "Áæ©Â§ßÂà©ÂúãÊ∞ëÂ£∫ÔºåÊúâÈ¨çÂ≠êËÄÅÈ†≠Ê®ôË™åÔºåÁÖÆÂá∫ÊúÄÈÅìÂú∞ÁöÑÁæ©ÂºèÊøÉÁ∏Æ„ÄÇ", tag: "Á∂ìÂÖ∏" },
                    { name: "KIKO Milano", desc: "Á±≥Ëò≠Âπ≥ÂÉπÂΩ©Â¶ùÂìÅÁâåÔºåÂè£Á¥ÖË∑üÁúºÂΩ±CPÂÄºË∂ÖÈ´ò„ÄÇ", tag: "ÂΩ©Â¶ù" },
                    { name: "ÊùæÈú≤ÈÜ¨", desc: "Ë∂ÖÂ∏ÇÂèØË≤∑Âà∞Âπ≥ÂÉπÊùæÈú≤ÈÜ¨ÔºåÊãåÈ∫µÊàñÂ°óÈ∫µÂåÖÈÉΩË∂ÖÁæéÂë≥„ÄÇ", tag: "ÁæéÈ£ü" }
                ]
            },
            {
                region: "ÈòøËÅØÈÖã - ÊùúÊãúËΩâÊ©ü",
                items: [
                    { name: "Bateel Ê§∞Ê£ó", desc: "Ê§∞Ê£óÁïåÁöÑLVÔºåÂè£ÊÑüÁ∂øÂØÜÔºåÂ§æÊ†∏Ê°ÉÊàñÊ©òÁöÆÁöÑÊúÄÂ•ΩÂêÉ„ÄÇ", tag: "Â•¢ËèØ" },
                    { name: "Èß±ÈßùÂ•∂Â∑ßÂÖãÂäõ", desc: "Al Nassma ÂìÅÁâåÔºåÂÅöÊàêÈß±ÈßùÂΩ¢ÁãÄÔºåÈùûÂ∏∏ÁâπÂà•ÁöÑ‰º¥ÊâãÁ¶Æ„ÄÇ", tag: "ÁâπËâ≤" },
                    { name: "Patchi Â∑ßÂÖãÂäõ", desc: "ÈªéÂ∑¥Â´©ÁöáÂÆ§Â∑ßÂÖãÂäõÔºåÊúâ„Äå‰∏≠Êù±Godiva„Äç‰πãÁ®±ÔºåÂåÖË£ùÁ≤æÁæé„ÄÇ", tag: "ÁîúÈªû" }
                ]
            }
        ];

        const Tag = ({ type, text }) => {
            const styles = {
                scam: "bg-red-50 text-red-700 border-red-200",
                buy: "bg-amber-50 text-amber-700 border-amber-200",
                info: "bg-blue-50 text-blue-700 border-blue-200",
                note: "bg-gray-50 text-gray-700 border-gray-200"
            };
            const iconMap = {
                scam: Icons.AlertTriangle,
                buy: Icons.ShoppingBag,
                info: Icons.Sun,
                note: Icons.Coffee
            };
            const IconComp = iconMap[type] || Icons.Sun;
            
            return (
                <div className={`text-xs px-2.5 py-1.5 rounded-md border mb-1.5 flex items-start ${styles[type] || styles.info}`}>
                    <span className="mt-0.5 shrink-0"><IconComp size={14} className="mr-1" /></span>
                    <span className="leading-relaxed">{text}</span>
                </div>
            );
        };

        const FlightCard = ({ flight }) => (
            <div className="bg-white rounded-xl shadow-md border border-stone-200 overflow-hidden mb-4">
                <div className="bg-terracotta-600 text-white px-4 py-2 flex justify-between items-center">
                    <div className="flex items-center gap-2">
                        <Icons.Plane size={18} />
                        <span className="font-bold tracking-wide">{flight.flightNo}</span>
                    </div>
                    <span className="text-xs font-bold bg-white/20 px-2 py-0.5 rounded-full">{flight.status}</span>
                </div>
                <div className="p-4">
                    <div className="flex justify-between items-center mb-4">
                        <div className="text-center">
                            <div className="text-3xl font-bold text-gray-800">{flight.route.split('‚ûù')[0].trim()}</div>
                            <div className="text-xs text-stone-500 font-bold bg-stone-100 px-2 py-0.5 rounded mt-1">Terminal {flight.terminal || "?"}</div>
                        </div>
                        <div className="flex-1 flex flex-col items-center px-4">
                            <div className="text-xs text-stone-400 font-mono mb-2">{flight.time.split('-')[0].trim()}</div>
                            <div className="w-full h-0.5 bg-stone-300 relative my-1">
                                <div className="absolute -top-1 right-0 w-2 h-2 bg-stone-300 rounded-full"></div>
                                <div className="absolute -top-2 left-1/2 transform -translate-x-1/2 bg-white p-1">
                                    <Icons.Plane size={12} className="text-stone-400 rotate-90" />
                                </div>
                            </div>
                            <div className="text-xs text-stone-400 font-mono mt-3">{flight.time.split('-')[1].trim()}</div>
                        </div>
                        <div className="text-center">
                            <div className="text-3xl font-bold text-gray-800">{flight.route.split('‚ûù')[1].trim()}</div>
                            <div className="text-xs text-stone-500 font-bold bg-stone-100 px-2 py-0.5 rounded mt-1">Gate {flight.gate}</div>
                        </div>
                    </div>
                </div>
            </div>
        );

        const F1Card = ({ event }) => (
            <div className="bg-racing-dark rounded-xl shadow-md border border-stone-800 overflow-hidden mb-4 relative">
                {/* Racing Flag Pattern Background */}
                <div className="absolute top-0 right-0 w-24 h-full opacity-10" style={{backgroundImage: 'repeating-linear-gradient(45deg, #000 25%, transparent 25%, transparent 75%, #000 75%, #000), repeating-linear-gradient(45deg, #000 25%, #fff 25%, #fff 75%, #000 75%, #000)', backgroundPosition: '0 0, 10px 10px', backgroundSize: '20px 20px'}}></div>
                
                <div className="bg-racing-red text-white px-4 py-2 flex justify-between items-center relative z-10">
                    <div className="flex items-center gap-2">
                        <Icons.Trophy size={18} />
                        <span className="font-bold tracking-wide italic">FORMULA 1</span>
                    </div>
                    <span className="text-xs font-bold bg-black/30 px-2 py-0.5 rounded-full">LIVE</span>
                </div>
                <div className="p-4 relative z-10">
                    <h3 className="text-white text-lg font-bold mb-1">{event.title}</h3>
                    <div className="flex items-center gap-2 text-gray-300 text-xs font-mono mb-3">
                        <Icons.Compass size={12} />
                        <span>{event.timeStr}</span>
                    </div>
                    <p className="text-sm text-gray-400 italic border-l-2 border-racing-red pl-3">{event.desc}</p>
                </div>
            </div>
        );

        const RecommendationCard = ({ items }) => (
            <div className="bg-orange-50 rounded-xl border border-orange-100 overflow-hidden mb-4">
                <div className="bg-orange-100 px-4 py-2 flex items-center gap-2 text-orange-800 font-bold">
                    <Icons.Utensils size={16} />
                    <span>Êé®Ëñ¶Âú®Âú∞ÁæéÈ£ü (Ëá™ÁêÜÈ§ê)</span>
                </div>
                <div className="p-3 space-y-3">
                    {items.map((item, idx) => (
                        <div key={idx} className="flex justify-between items-start pb-2 border-b border-orange-100 last:border-0 last:pb-0">
                            <div>
                                <div className="font-bold text-stone-800 flex items-center gap-2">
                                    {item.name}
                                    {item.link && (
                                        <a href={item.link} target="_blank" className="text-orange-500 hover:text-orange-700">
                                            <Icons.ExternalLink size={12} />
                                        </a>
                                    )}
                                </div>
                                <p className="text-xs text-stone-600 mt-0.5">{item.desc}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );

        const ItalyTravelApp = () => {
            const [activeTab, setActiveTab] = useState('itinerary'); 
            const [currentDay, setCurrentDay] = useState(1);
            const [scriptUrl, setScriptUrl] = useState(GOOGLE_SCRIPT_URL);
            const [tripId, setTripId] = useState(MY_TRIP_ID);
            const [isConfigured, setIsConfigured] = useState(!!GOOGLE_SCRIPT_URL);
            
            const [expenses, setExpenses] = useState([]);
            const [customSpots, setCustomSpots] = useState([]);
            const [isLoading, setIsLoading] = useState(false);
            const [syncStatus, setSyncStatus] = useState('offline'); // 'syncing', 'online', 'error', 'offline'

            const [newExpense, setNewExpense] = useState({ item: '', category: 'ÁæéÈ£ü', amount: '', currency: 'EUR' });
            const [newSpot, setNewSpot] = useState({ name: '', location: '', link: '', note: '' });
            
            // New Shopping List State
            const [shoppingList, setShoppingList] = useState([]);
            const [newItemName, setNewItemName] = useState('');
            const [newItemLocation, setNewItemLocation] = useState('');

            // Ê™¢Êü•ÊòØÂê¶ÂæûÊú¨Âú∞ÂÑ≤Â≠òËÆÄÂèñË®≠ÂÆö
            useEffect(() => {
                if (!GOOGLE_SCRIPT_URL) {
                    const savedScriptUrl = localStorage.getItem('italy_scriptUrl');
                    const savedTripId = localStorage.getItem('italy_tripId');
                    if (savedScriptUrl) {
                        setScriptUrl(savedScriptUrl);
                        setIsConfigured(true);
                    }
                    if (savedTripId) setTripId(savedTripId);
                }
            }, []);

            // Ë≥áÊñôÂêåÊ≠•
            useEffect(() => {
                if (isConfigured && scriptUrl) {
                    fetchData(); 
                    const interval = setInterval(fetchData, 10000); 
                    return () => clearInterval(interval);
                }
            }, [isConfigured, scriptUrl, tripId]);

            const fetchData = async () => {
                if (!scriptUrl) return;
                try {
                    setSyncStatus('syncing');
                    const response = await fetch(`${scriptUrl}?tripId=${tripId}&_t=${new Date().getTime()}`);
                    const data = await response.json();
                    
                    if (data.expenses) {
                        data.expenses.sort((a, b) => b.timestamp.seconds - a.timestamp.seconds);
                        setExpenses(data.expenses);
                    }
                    if (data.spots) {
                        data.spots.sort((a, b) => b.timestamp.seconds - a.timestamp.seconds);
                        setCustomSpots(data.spots);
                    }
                    if (data.shopping) {
                         // Âêà‰ΩµÊú¨Âú∞ËàáÈõ≤Á´ØË≥ºÁâ©Ê∏ÖÂñÆÔºå‰ª• ID ÁÇ∫Ê∫ñ
                         setShoppingList(data.shopping);
                    }
                    setSyncStatus('online');
                } catch (error) {
                    console.error("ÂêåÊ≠•Â§±Êïó:", error);
                    setSyncStatus('error');
                }
            };

            const handleConfigSubmit = (e) => {
                e.preventDefault();
                if (scriptUrl.trim().length > 0) {
                    localStorage.setItem('italy_scriptUrl', scriptUrl);
                    localStorage.setItem('italy_tripId', tripId);
                    setIsConfigured(true);
                }
            };

            const handleAddExpense = async () => {
                if (!newExpense.item || !newExpense.amount) return;
                const newItem = { ...newExpense, type: 'expense', tripId };
                const tempItem = { ...newItem, id: Date.now(), timestamp: { seconds: Date.now()/1000 } };
                setExpenses([tempItem, ...expenses]);
                setNewExpense({ item: '', category: 'ÁæéÈ£ü', amount: '', currency: 'EUR' });

                if (scriptUrl) {
                    try {
                        await fetch(scriptUrl, {
                            method: 'POST',
                            mode: 'no-cors', 
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(newItem)
                        });
                    } catch (error) {
                        console.error("ÂØ´ÂÖ•Â§±Êïó:", error);
                    }
                }
            };

            const handleAddSpot = async () => {
                if (!newSpot.name) return;
                const newItem = { ...newSpot, type: 'spot', tripId };
                const tempItem = { ...newItem, id: Date.now(), timestamp: { seconds: Date.now()/1000 } };
                setCustomSpots([tempItem, ...customSpots]);
                setNewSpot({ name: '', location: '', link: '', note: '' });

                if (scriptUrl) {
                    try {
                        await fetch(scriptUrl, {
                            method: 'POST',
                            mode: 'no-cors',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(newItem)
                        });
                    } catch (error) {
                        console.error("ÂØ´ÂÖ•Â§±Êïó:", error);
                    }
                }
            };
            
            // Shopping List Handlers (Cloud Sync Version)
            const handleAddItem = async () => {
                if (!newItemName.trim()) return;
                const newItem = {
                    id: 'shop_' + Date.now(), // Unique string ID
                    name: newItemName,
                    location: newItemLocation,
                    checked: false,
                    type: 'shopping', // Important tag for backend
                    tripId: tripId
                };
                
                // Optimistic Update
                setShoppingList([newItem, ...shoppingList]);
                setNewItemName('');
                setNewItemLocation('');

                if (scriptUrl) {
                     try {
                        // Send simplified object to match Apps Script expectation
                        await fetch(scriptUrl, {
                            method: 'POST',
                            mode: 'no-cors',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                type: 'shopping',
                                tripId: tripId,
                                item: newItem.name,
                                location: newItem.location,
                                checked: newItem.checked,
                                id: newItem.id
                            })
                        });
                    } catch (error) {
                        console.error("Ë≥ºÁâ©Ê∏ÖÂñÆÂØ´ÂÖ•Â§±Êïó:", error);
                    }
                }
            };

            const toggleItem = async (id) => {
                const targetItem = shoppingList.find(item => item.id === id);
                if (!targetItem) return;
                
                const updatedItem = { ...targetItem, checked: !targetItem.checked };
                
                // Optimistic Update
                setShoppingList(shoppingList.map(item => item.id === id ? updatedItem : item));

                if (scriptUrl) {
                     try {
                        await fetch(scriptUrl, {
                            method: 'POST',
                            mode: 'no-cors',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                type: 'shopping',
                                tripId: tripId,
                                item: updatedItem.name || updatedItem.item, // Handle potential key mismatch from read
                                location: updatedItem.location,
                                checked: updatedItem.checked,
                                id: updatedItem.id
                            })
                        });
                    } catch (error) {
                        console.error("ÁãÄÊÖãÊõ¥Êñ∞Â§±Êïó:", error);
                    }
                }
            };

            const copyToGoogleSheetFormat = () => {
                const header = "Êó•Êúü\tÂàÜÈ°û\tÂìÅÈ†Ö\tÂπ£Âà•\tÈáëÈ°ç\n";
                const body = expenses.map(e => {
                    const dateStr = new Date(e.timestamp.seconds * 1000).toLocaleDateString();
                    return `${dateStr}\t${e.category}\t${e.item}\t${e.currency}\t${e.amount}`;
                }).join("\n");
                navigator.clipboard.writeText(header + body).then(() => alert("Ë®òÂ∏≥Ë≥áÊñôÂ∑≤Ë§áË£ΩÔºÅ\nË´ãË≤º‰∏äÂà∞ Google Ë°®Ê†º„ÄÇ"));
            };

            const copySpotsToGoogleSheetFormat = () => {
                const header = "Êó•Êúü\tÂú∞ÂçÄ\tÂêçÁ®±\tÈÄ£Áµê\tÂÇôË®ª\n";
                const body = customSpots.map(s => {
                    const dateStr = new Date(s.timestamp.seconds * 1000).toLocaleDateString();
                    return `${dateStr}\t${s.location}\t${s.name}\t${s.link}\t${s.note}`;
                }).join("\n");
                navigator.clipboard.writeText(header + body).then(() => alert("ÊôØÈªûË≥áÊñôÂ∑≤Ë§áË£ΩÔºÅ\nË´ãË≤º‰∏äÂà∞ Google Ë°®Ê†º„ÄÇ"));
            };

            const dayData = tripData.find(d => d.day === currentDay);
            const totalExpenseEUR = expenses.filter(e => e.currency === 'EUR').reduce((acc, curr) => acc + parseFloat(curr.amount || 0), 0);
            const totalExpenseAED = expenses.filter(e => e.currency === 'AED').reduce((acc, curr) => acc + parseFloat(curr.amount || 0), 0);

            if (!isConfigured) {
                return (
                    <div className="flex flex-col items-center justify-center h-screen px-8 text-center animate-fadeIn bg-terracotta-50">
                        <div className="w-20 h-20 bg-terracotta-100 rounded-full flex items-center justify-center mb-6 text-terracotta-600">
                            <Icons.Settings size={32} />
                        </div>
                        <h2 className="text-2xl font-serif font-bold text-gray-800 mb-2">ÂàùÊ¨°Ë®≠ÂÆö</h2>
                        <p className="text-stone-500 text-sm mb-6">Ë´ãËº∏ÂÖ• Apps Script Á∂≤ÂùÄ‰ª•ÂïüÁî®Èõ≤Á´ØÂäüËÉΩ„ÄÇ<br/>(Âª∫Ë≠∞Áõ¥Êé•‰øÆÊîπÁ®ãÂºèÁ¢º‰∏≠ÁöÑ GOOGLE_SCRIPT_URL ËÆäÊï∏Ôºå‰ª•ÂæåÂ∞±‰∏çÁî®Ëº∏ÂÖ•‰∫Ü)</p>
                        <form onSubmit={handleConfigSubmit} className="w-full max-w-xs space-y-4">
                            <input type="text" placeholder="Apps Script Á∂≤ÂùÄ (https://...)" className="w-full p-4 bg-white border border-stone-200 rounded-xl text-center text-xs text-stone-600 outline-none focus:ring-2 focus:ring-terracotta-200" value={scriptUrl} onChange={(e) => setScriptUrl(e.target.value)} />
                            <input type="text" placeholder="ÊóÖÁ®ã‰ª£Á¢º (ÈÅ∏Â°´)" className="w-full p-4 bg-white border border-stone-200 rounded-xl text-center text-sm font-bold tracking-widest uppercase outline-none focus:ring-2 focus:ring-terracotta-200" value={tripId} onChange={(e) => setTripId(e.target.value)} />
                            <button type="submit" className="w-full bg-terracotta-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-terracotta-200 hover:bg-terracotta-700 active:scale-95 transition-all flex items-center justify-center gap-2">
                                <Icons.LinkIcon size={18} /> ÈñãÂßã‰ΩøÁî®
                            </button>
                        </form>
                    </div>
                );
            }

            return (
                <div className="w-full h-screen bg-[#fbf7f0] font-sans text-gray-800 flex justify-center overflow-hidden">
                    <div className="w-full max-w-md h-full bg-[#fbf7f0] relative flex flex-col shadow-2xl">
                        <div className="bg-[#fbf7f0] px-5 pt-12 pb-2 flex justify-between items-center z-20">
                            <div>
                                <h1 className="font-serif text-2xl font-bold text-terracotta-700">Ciao, Italy! üáÆüáπ</h1>
                                <p className="text-xs text-stone-500 font-medium tracking-wide flex items-center gap-1"><Icons.Lock size={10} /> Syncing: {tripId}</p>
                            </div>
                            {/* ÁãÄÊÖãÊåáÁ§∫ÁáàÔºöÊ≠£Â∏∏(Á≤âÁ¥ÖÊÑõÂøÉ)ÔºåÁï∞Â∏∏/Èõ¢Á∑ö(ÈªëËâ≤ÊÑõÂøÉ) */}
                            <div className="w-8 h-8 rounded-full bg-white border border-stone-200 flex items-center justify-center shadow-sm">
                                {syncStatus === 'online' || syncStatus === 'syncing' ? (
                                    <div className="text-pink-500"><Icons.Heart size={18} /></div>
                                ) : (
                                    <div className="text-gray-800"><Icons.HeartCrack size={18} /></div>
                                )}
                            </div>
                        </div>

                        <div className="flex-1 overflow-y-auto no-scrollbar scroll-smooth content-area">
                            {activeTab === 'itinerary' && (
                                <div className="pb-4">
                                    <div className="sticky top-0 z-10 bg-[#fbf7f0] pt-2 pb-3 shadow-sm border-b border-stone-200 overflow-x-auto whitespace-nowrap px-4 no-scrollbar">
                                        <div className="flex gap-3">
                                            {tripData.map((d) => (
                                                <button key={d.day} onClick={() => setCurrentDay(d.day)} className={`flex flex-col items-center justify-center min-w-[4.5rem] h-16 rounded-xl transition-all duration-300 border-2 ${currentDay === d.day ? "bg-terracotta-600 border-terracotta-600 text-white shadow-md transform scale-105" : "bg-white border-stone-200 text-stone-500 hover:border-terracotta-300"}`}>
                                                    <span className="text-[10px] font-medium uppercase tracking-wider opacity-80">Day {d.day}</span>
                                                    <span className={`text-sm font-bold ${currentDay === d.day ? 'text-white' : 'text-stone-600'}`}>{d.date.split(' ')[0]}</span>
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="px-5 pt-6 animate-fadeIn">
                                        <div className="bg-white rounded-2xl p-5 shadow-sm border border-stone-100 mb-6 relative overflow-hidden">
                                            <div className="absolute top-0 right-0 w-24 h-24 bg-terracotta-50 rounded-bl-full -mr-10 -mt-10 z-0"></div>
                                            <div className="relative z-10 flex justify-between items-start mb-2">
                                                <div><h2 className="text-2xl font-serif font-bold text-gray-800">{dayData.date}</h2><div className="flex items-center text-stone-500 text-sm mt-1"><Icons.MapPin size={14} className="mr-1" />{dayData.location}</div></div>
                                                <div className="flex flex-col items-end"><dayData.weather.icon className="text-terracotta-500 mb-1" size={28} /><span className="font-bold text-gray-700">{dayData.weather.temp}</span><span className="text-xs text-stone-400">{dayData.weather.status}</span></div>
                                            </div>
                                        </div>
                                        {dayData.highlights && <div className="mb-6"><div className="flex flex-wrap gap-2">{dayData.highlights.map((h, i) => <span key={i} className="px-3 py-1 bg-olive-100 text-olive-800 text-xs font-bold rounded-full border border-olive-200">#{h}</span>)}</div></div>}
                                        
                                        <div className="space-y-6">
                                            {dayData.itinerary.map((item, idx) => (
                                                <div key={idx}>
                                                    {item.type === 'flight' ? (
                                                        <FlightCard flight={item} />
                                                    ) : item.type === 'f1' ? (
                                                        <F1Card event={item} />
                                                    ) : item.type === 'recommendation' ? (
                                                        <RecommendationCard items={item.items} />
                                                    ) : (
                                                        <div className="flex gap-4 group">
                                                            <div className="flex flex-col items-center"><div className={`w-3 h-3 rounded-full border-2 z-10 ${item.type === 'transport' ? 'bg-stone-200 border-stone-300' : item.type === 'food' ? 'bg-amber-100 border-amber-300' : 'bg-terracotta-100 border-terracotta-400'}`}></div>{idx !== dayData.itinerary.length - 1 && <div className="w-0.5 h-full bg-stone-100 -mt-1"></div>}</div>
                                                            <div className="flex-1 pb-2">
                                                                <div className="flex justify-between items-baseline mb-1"><span className="font-mono text-xs font-bold text-stone-400 bg-stone-50 px-1.5 rounded">{item.time}</span>{item.type === 'transport' && <Icons.Train size={14} className="text-stone-300" />}{item.type === 'spot' && <Icons.Camera size={14} className="text-terracotta-300" />}{item.type === 'food' && <Icons.Coffee size={14} className="text-amber-300" />}</div>
                                                                <div className={`p-3 rounded-xl border ${item.type === 'transport' ? 'bg-stone-50 border-stone-100' : 'bg-white border-stone-100 shadow-sm'}`}><h4 className="font-bold text-gray-800 flex items-center gap-2">{item.title}{item.link && <a href={item.link} target="_blank" rel="noreferrer" className="text-blue-400 hover:text-blue-600"><Icons.ExternalLink size={12} /></a>}</h4>{item.desc && <p className="text-sm text-stone-600 mt-1 leading-relaxed">{item.desc}</p>}</div>
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                            ))}
                                        </div>
                                        {dayData.stay && (
                                            <div className="mt-8 space-y-3">
                                                <div className="bg-blue-50 p-4 rounded-xl border border-blue-100 flex items-start gap-3">
                                                    <div className="bg-white p-2 rounded-full shadow-sm text-blue-500"><Icons.Sun size={20} className="fill-current" /></div>
                                                    <div>
                                                        <h5 className="text-xs font-bold text-blue-400 uppercase tracking-wide mb-1">Accommodation</h5>
                                                        <p className="font-serif font-bold text-blue-900">{dayData.stay}</p>
                                                    </div>
                                                </div>
                                                
                                                <a 
                                                    href={`https://www.google.com/maps/search/supermarket+near+${encodeURIComponent(dayData.stay)}`} 
                                                    target="_blank" 
                                                    rel="noreferrer"
                                                    className="block w-full bg-green-50 hover:bg-green-100 border border-green-200 p-3 rounded-xl flex items-center justify-center gap-2 text-green-700 font-bold transition-colors shadow-sm"
                                                >
                                                    <Icons.ShoppingCart size={18} />
                                                    ÊêúÂ∞ãÈ£ØÂ∫óÈôÑËøëË∂ÖÂ∏Ç
                                                </a>
                                            </div>
                                        )}
                                        {(dayData.mustBuy || dayData.tips.length > 0) && <div className="mt-8"><h3 className="text-center font-serif text-xl italic text-stone-400 mb-4">- Traveler's Notes -</h3>{dayData.mustBuy && <div className="mb-4 bg-white p-4 rounded-xl border border-dashed border-terracotta-300 relative"><div className="absolute -top-3 left-4 bg-[#fbf7f0] px-2 text-terracotta-600 font-bold text-xs flex items-center"><Icons.ShoppingBag size={12} className="mr-1"/> ‰ªäÊó•ÂøÖË≤∑</div><ul className="text-sm text-gray-700 space-y-1 mt-1 list-disc list-inside marker:text-terracotta-400">{dayData.mustBuy.map((item, i) => <li key={i}>{item}</li>)}</ul></div>}{dayData.tips.map((tip, i) => <Tag key={i} type={tip.type} text={tip.text} />)}</div>}
                                    </div>
                                </div>
                            )}
                            {activeTab === 'expenses' && (
                                <div className="px-5 pt-6 animate-fadeIn">
                                    <div className="flex justify-between items-center mb-6"><h2 className="text-2xl font-serif font-bold text-gray-800 flex items-center gap-2"><Icons.Wallet className="text-terracotta-500" /> ÊóÖË°åË®òÂ∏≥</h2><button onClick={copyToGoogleSheetFormat} className="flex items-center gap-1 text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-full font-bold hover:bg-green-200 transition-colors"><Icons.FileSpreadsheet size={14} /> ÂåØÂá∫</button></div>
                                    <div className="grid grid-cols-2 gap-4 mb-8"><div className="bg-white p-4 rounded-xl shadow-sm border border-stone-100"><span className="text-xs text-stone-400 uppercase">Total (EUR)</span><div className="text-2xl font-bold text-gray-800 mt-1">‚Ç¨{totalExpenseEUR.toFixed(2)}</div></div><div className="bg-white p-4 rounded-xl shadow-sm border border-stone-100"><span className="text-xs text-stone-400 uppercase">Total (AED)</span><div className="text-2xl font-bold text-gray-800 mt-1">{totalExpenseAED.toFixed(2)} AED</div></div></div>
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8"><h3 className="font-bold text-gray-700 mb-4 text-sm">Êñ∞Â¢ûÊ∂àË≤ª</h3><div className="space-y-3"><input type="text" placeholder="ÂìÅÈ†Ö" className="w-full p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newExpense.item} onChange={(e) => setNewExpense({...newExpense, item: e.target.value})} /><div className="flex gap-3"><select className="flex-1 p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newExpense.category} onChange={(e) => setNewExpense({...newExpense, category: e.target.value})}><option>ÁæéÈ£ü</option><option>Ë≥ºÁâ©</option><option>‰º¥ÊâãÁ¶Æ</option><option>Ë∂ÖÂ∏Ç</option><option>‰∫§ÈÄö</option></select><select className="w-24 p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newExpense.currency} onChange={(e) => setNewExpense({...newExpense, currency: e.target.value})}><option value="EUR">‚Ç¨ EUR</option><option value="AED">AED</option></select></div><input type="number" placeholder="ÈáëÈ°ç" className="w-full p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newExpense.amount} onChange={(e) => setNewExpense({...newExpense, amount: e.target.value})} /><button onClick={handleAddExpense} className="w-full bg-terracotta-600 text-white py-3 rounded-lg font-bold text-sm hover:bg-terracotta-700 active:scale-95 transition-all">Âä†ÂÖ•Ê∏ÖÂñÆ</button></div></div>
                                    <div className="space-y-3">{isLoading ? <div className="flex justify-center py-10 text-stone-300"><Icons.Loader2 className="animate-spin" /></div> : expenses.length === 0 ? <div className="text-center text-stone-400 py-8 text-sm italic">ÈÇÑÊ≤íÊúâÊ∂àË≤ªÁ¥ÄÈåÑÔºåÈñãÂßãË≤∑Ë≤∑Ë≤∑ÂêßÔºÅ</div> : expenses.map(ex => (<div key={ex.id} className="flex justify-between items-center bg-white p-4 rounded-xl border border-stone-100"><div className="flex items-center gap-3"><div className={`w-2 h-8 rounded-full ${ex.category === 'Ë≥ºÁâ©' ? 'bg-pink-300' : ex.category === 'ÁæéÈ£ü' ? 'bg-amber-300' : ex.category === '‰º¥ÊâãÁ¶Æ' ? 'bg-purple-300' : 'bg-stone-300'}`}></div><div><div className="font-bold text-gray-800 text-sm">{ex.item}</div><div className="text-xs text-stone-400">{ex.category}</div></div></div><div className="flex items-center gap-3"><span className="font-mono font-bold text-gray-600">{ex.currency === 'EUR' ? '‚Ç¨' : 'AED'} {ex.amount}</span></div></div>))}</div>
                                </div>
                            )}
                            {activeTab === 'spots' && (
                                <div className="px-5 pt-6 animate-fadeIn">
                                    <div className="flex justify-between items-center mb-6"><h2 className="text-2xl font-serif font-bold text-gray-800 flex items-center gap-2"><Icons.Compass className="text-terracotta-500" /> Ëá™Áî±Ë°åÊé¢Á¥¢</h2><button onClick={copySpotsToGoogleSheetFormat} className="flex items-center gap-1 text-xs bg-green-100 text-green-700 px-3 py-1.5 rounded-full font-bold hover:bg-green-200 transition-colors"><Icons.FileSpreadsheet size={14} /> ÂåØÂá∫</button></div>
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8 relative overflow-hidden"><div className="absolute top-0 right-0 w-20 h-20 bg-olive-50 rounded-bl-full -mr-8 -mt-8"></div><h3 className="font-bold text-gray-700 mb-4 text-sm relative z-10">Êñ∞Â¢ûÂè£Ë¢ãÂêçÂñÆ</h3><div className="space-y-3 relative z-10"><div className="flex gap-3"><input type="text" placeholder="ÂêçÁ®±" className="flex-1 p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newSpot.name} onChange={(e) => setNewSpot({...newSpot, name: e.target.value})} /><select className="w-1/3 p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newSpot.location} onChange={(e) => setNewSpot({...newSpot, location: e.target.value})}><option value="">Âú∞ÂçÄ</option><option>Á±≥Ëò≠</option><option>Â®ÅÂ∞ºÊñØ</option><option>‰ΩõÁæÖÂÄ´ÊñØ</option><option>ÁæÖÈ¶¨</option><option>ÂÖ∂‰ªñ</option></select></div><input type="text" placeholder="Google Maps ÈÄ£Áµê" className="w-full p-3 bg-stone-50 rounded-lg text-sm outline-none" value={newSpot.link} onChange={(e) => setNewSpot({...newSpot, link: e.target.value})} /><textarea placeholder="ÂÇôË®ª" className="w-full p-3 bg-stone-50 rounded-lg text-sm outline-none resize-none h-20" value={newSpot.note} onChange={(e) => setNewSpot({...newSpot, note: e.target.value})} /><button onClick={handleAddSpot} className="w-full bg-olive-600 text-white py-3 rounded-lg font-bold text-sm hover:bg-olive-700 active:scale-95 transition-all">Âä†ÂÖ•Âú∞Âúñ</button></div></div>
                                    <div className="space-y-4">{customSpots.length === 0 ? <div className="flex flex-col items-center justify-center py-10 text-stone-400"><Icons.Compass size={40} className="mb-2 opacity-20" /><span className="text-sm italic">Â∞áÊÉ≥ÂéªÁöÑÂú∞ÊñπË®òÈåÑÂú®ÈÄôË£°...</span></div> : customSpots.map(spot => (<div key={spot.id} className="bg-white p-4 rounded-xl border border-stone-100 shadow-sm relative overflow-hidden"><div className="flex justify-between items-start mb-2"><h4 className="font-bold text-gray-800">{spot.name}</h4>{spot.location && <span className="text-[10px] font-bold uppercase tracking-wider bg-stone-100 text-stone-500 px-2 py-0.5 rounded-full">{spot.location}</span>}</div><p className="text-xs text-stone-500 mb-3">{spot.note}</p><div className="flex justify-between items-center border-t border-stone-50 pt-2 mt-2">{spot.link ? (<a href={spot.link} target="_blank" rel="noreferrer" className="text-xs font-bold text-blue-500 flex items-center gap-1"><Icons.Navigation size={12} /> Â∞éËà™</a>) : <span></span>}</div></div>))}</div>
                                </div>
                            )}
                            {activeTab === 'shopping' && (
                                <div className="px-5 pt-6 animate-fadeIn">
                                    <div className="flex justify-between items-center mb-6"><h2 className="text-2xl font-serif font-bold text-gray-800 flex items-center gap-2"><Icons.ShoppingBag className="text-terracotta-500" /> ÂøÖË≤∑‰º¥ÊâãÁ¶Æ</h2></div>
                                    
                                    {/* My Checklist Section */}
                                    <div className="bg-white p-5 rounded-2xl shadow-sm border border-stone-100 mb-8">
                                        <h3 className="font-bold text-gray-700 mb-4 text-sm">ÊàëÁöÑË≥ºÁâ©Ê∏ÖÂñÆ (Checklist)</h3>
                                        <div className="flex gap-2 mb-4">
                                            <div className="flex-1 flex flex-col gap-2">
                                                <input 
                                                    type="text" 
                                                    placeholder="ÂìÅÈ†Ö (Â¶Ç: ËïæËéâÊ≠êÊ¥óÈ´ÆÁ≤æ)" 
                                                    className="w-full p-3 bg-stone-50 rounded-lg text-sm outline-none focus:ring-2 focus:ring-terracotta-200 transition-all"
                                                    value={newItemName}
                                                    onChange={(e) => setNewItemName(e.target.value)}
                                                />
                                                <input 
                                                    type="text" 
                                                    placeholder="Âì™Ë£°Ë≤∑ (Â¶Ç: ‰ΩõÁæÖÂÄ´ÊñØ)" 
                                                    className="w-full p-3 bg-stone-50 rounded-lg text-sm outline-none focus:ring-2 focus:ring-terracotta-200 transition-all"
                                                    value={newItemLocation}
                                                    onChange={(e) => setNewItemLocation(e.target.value)}
                                                    onKeyPress={(e) => e.key === 'Enter' && handleAddItem()}
                                                />
                                            </div>
                                            <button 
                                                onClick={handleAddItem}
                                                className="bg-terracotta-600 text-white px-4 rounded-lg font-bold hover:bg-terracotta-700 transition-colors self-stretch flex items-center justify-center"
                                            >
                                                <Icons.Plus size={24} />
                                            </button>
                                        </div>
                                        
                                        <div className="space-y-2">
                                            {shoppingList.length === 0 && <p className="text-center text-stone-400 text-xs py-2 italic">ÈÇÑÊ≤íÊúâÊ∏ÖÂñÆÔºåÂø´Âä†‰∏äÂéªÂêßÔºÅ</p>}
                                            {shoppingList.map(item => (
                                                <div key={item.id} className={`flex items-center gap-3 p-3 rounded-xl border transition-all ${item.checked ? 'bg-stone-50 border-stone-100 opacity-60' : 'bg-white border-stone-200'}`}>
                                                    <button onClick={() => toggleItem(item.id)} className={`shrink-0 ${item.checked ? 'text-green-500' : 'text-stone-300 hover:text-stone-400'}`}>
                                                        {item.checked ? <Icons.CheckCircle2 size={24} className="fill-green-50" /> : <Icons.Square size={24} />}
                                                    </button>
                                                    
                                                    <div className="flex-1">
                                                        <div className={`text-sm font-medium ${item.checked ? 'line-through text-stone-400' : 'text-gray-800'}`}>
                                                            {item.name || item.item}
                                                        </div>
                                                        {item.location && <div className="text-xs text-stone-400 flex items-center gap-1 mt-0.5"><Icons.MapPin size={10} />{item.location}</div>}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        <p className="text-xs text-green-600 mt-3 text-center flex items-center justify-center gap-1">
                                            <Icons.Cloud size={10} /> Ê∏ÖÂñÆÂ∑≤ÂïüÁî®Èõ≤Á´ØÂêåÊ≠•
                                        </p>
                                    </div>

                                    <div className="space-y-6">
                                        {shoppingData.map((section, idx) => (
                                            <div key={idx}>
                                                <h3 className="font-bold text-lg text-olive-700 mb-3 border-b-2 border-olive-100 pb-1">{section.region}</h3>
                                                <div className="space-y-3">
                                                    {section.items.map((item, i) => (
                                                        <div key={i} className="bg-white p-4 rounded-xl shadow-sm border border-stone-100 flex items-start gap-3">
                                                            <div className="bg-terracotta-50 p-2 rounded-full text-terracotta-500 mt-1"><Icons.Gift size={18} /></div>
                                                            <div className="flex-1">
                                                                <div className="flex justify-between items-start">
                                                                    <h4 className="font-bold text-gray-800">{item.name}</h4>
                                                                    <span className="text-[10px] bg-olive-100 text-olive-800 px-2 py-0.5 rounded-full font-bold">{item.tag}</span>
                                                                </div>
                                                                <p className="text-sm text-stone-500 mt-1 leading-relaxed">{item.desc}</p>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="fixed bottom-0 w-full max-w-md bg-white border-t border-stone-100 px-6 py-3 flex justify-between items-center z-30 shadow-[0_-5px_15px_rgba(0,0,0,0.02)]">
                            <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'itinerary' ? 'text-terracotta-600' : 'text-stone-300'}`}><Icons.MapIcon size={22} className={activeTab === 'itinerary' ? 'fill-current' : ''} /><span className="text-[10px] font-bold">Ë°åÁ®ã</span></button>
                            <button onClick={() => setActiveTab('spots')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'spots' ? 'text-olive-600' : 'text-stone-300'}`}><Icons.Compass size={24} className={`mb-1 p-0.5 ${activeTab === 'spots' ? 'text-olive-600' : ''}`} /><span className="text-[10px] font-bold">ÊôØÈªû</span></button>
                            <button onClick={() => setActiveTab('expenses')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'expenses' ? 'text-terracotta-600' : 'text-stone-300'}`}><Icons.Wallet size={22} className={activeTab === 'expenses' ? 'fill-current' : ''} /><span className="text-[10px] font-bold">Ë®òÂ∏≥</span></button>
                            <button onClick={() => setActiveTab('shopping')} className={`flex flex-col items-center gap-1 transition-colors ${activeTab === 'shopping' ? 'text-terracotta-600' : 'text-stone-300'}`}><Icons.ShoppingBag size={22} className={activeTab === 'shopping' ? 'fill-current' : ''} /><span className="text-[10px] font-bold">Ë≥ºÁâ©</span></button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ItalyTravelApp />);
    </script>
</body>
</html>
